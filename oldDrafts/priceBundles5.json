{"$schema": "https://vega.github.io/schema/vega-lite/v5.json",

  "title": {
  "text": "Distrubution of prices, 1990-2022",
  "subtitle": "Distribution of prices, 1990-2020",
  "subtitleFontStyle":"italic",
  "subtitleFontSize":10,
  "anchor": "start",
  "color": "black"},

  "config": {
    "background":"#ffffff",
    "view": {
      "stroke": "transparent"}},

  "width":30,
  "height":400,

  "data": {
      "url": "https://raw.githubusercontent.com/RDeconomist/prices/master/prices_630505.csv"},


  "transform": [
    
    {"window": [{"op": "rank", "as": "id"}], "groupby": ["price", "year"]},
    
    {"calculate": "2*datum.id", "as": "val"},

    {"xxfilter":"datum.year<2021"}

    ],

  "mark": {
  	"type": "point",
    "size":5,
  	"opacity": 1,
    "strokeWidth":1
  },
  "encoding": {
    "y": {
        "field": "price", 
        "type": "quantitative", 
        "sort":"ascending"},
    
    "x": {
        "field": "val", 
        "type": "ordinal", 
        "axis": null, 
        "sort": "ascending"},
    
    "facet": {
      "field":"year",
      "title":null,
      "columns": 8}
  }
}



    
    